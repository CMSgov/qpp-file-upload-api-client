language: node_js
node_js: '8'
cache:
  directories:
  - node_modules
before_deploy:
- npm run clean
- npm run build:prod
- npm install jshon
- export RELEASE_NOTES=$(npx jshon -s "$(cat RELEASE-NOTES.md)")
deploy:
- provider: npm
  email: jay.bishtawi@semanticbits.com
  skip_cleanup: true
  api_key:
    secure: YNbfqMuUc0Pgs0g7J8MnlvCU9qhFLU5Krl4aCqmNUd9QWsc66TIDZpQPbiktKkOiI5Xp9ER7Ud79HZNAzJFK+kAx6TjZGrpRWQlFYMVJ0ey1IBbbrCHgshzBW9GIm2YnEq/pQWV0AmWxWFP2wfFg+LfHvPN/zjg0uAP7CJ4OsZMZU2VFRLEiMl8TShbL+zY8R5f9FHuD3Ng9kt3h8sAyiDsLJqu2lZdwpDKoLtX6okSb3b2/06fydZHpozDf77Xva93JGA8CjprZJd87jQ4m8bBL3dRQekXR1G3uvY0MzoPViw001eRNfMaSqOSOBQzJR/gQh2Jy7fpz4dN8bBAjeBZGtq2YVBCSGHf5+D4ld5bCsqd2xW8GfsioMsPzrmftU9yc5hbqGdg2p3Lmi7qQ7YhCmR4MmorZZWl9izgwnL9So9KhC5Rxg6GcBxWd29+t+HIT0pqEWY1E+HbC1D560dqORQNHt7qmzCGlOxurB/rMej9Jf8VzNayU2EzyTJHgs7AQTTbAuliABeBVP+B2D9tX32hqBSFoufWmOM1XPYG0d1oRYKXuVouhKFmW74dTXXHKM387Ojq72aoVClpMoUIkNRdnsjHjweWAbXJY1cXOpRF6iSpv9qYK5DaPeczcJyFHnFx4tkSVMcQffICCSQXFZm6/ERlJZo/aLddKpIo=
  on:
    tags: true
    repo: CMSgov/qpp-file-upload-api-client
- provider: releases
  api_key:
    secure: mZB/nXEpclGM1ClBJQ9mEMSyi9vUrC6I/SceSg9Q5gKTP+aFjVMvtUnMso9iYOPyxVD+gdfgGDiLAdbQr1MitM1n1103vUab6QPhXFFWrBk/QzZ81a9PA9oeSTQevkv9C2FNJTvoH5t5A2iuKjUYyR+3IWfQRYaKMUX2py5DGFX/X1b/JCDYJopmsm91Pa51I3A3VVWqr+6OdqxVacl76++J63iFHqO60SaY4/QAzTvbUn7PTBY54XpHYmrGd0PrqKzgRA4gc7aSeqxc2b31XrC3ALw52sNjELaTkkLQI6njF/93pHrlmlWzaYjWM0Mqo+1nBUgM6UYGyEifnSM9fu5wFRAGImDq/NqqtyO70unbAADInpTkI5ONf+LCWol+NgHPse+qlDf9/FFu7am0N2XOvmFstMAIdA4cU7n4x3ntFghFCBpHWfkb1n+I8cRGYecqF9wfcQAfnYDa+Pr0k+I3j0S5K+JNmuwRTkKvyvzoBsqgjWTxlnPuhfoRa2zTRIp7iyx9uEV3dG+p2cp8XEi2ANsK5wY6BBFvXGP8EnHS/kIcRfadXxXyxXIAV94PWSHCufwx/JSpSIiMo0eejzMqBGBXgE7NVtbQJSnrCzDU1O5e/s8u4oazeWWx91AFNBlG2YYnqjrhrbIcKZK0c4yoGdZavx5XixSgLAC6rf0=
  file: RELEASE-NOTES.md
  body: "${RELEASE_NOTES}"
  draft: false
  prerelease: true
  on:
    repo: CMSgov/qpp-file-upload-api-client
    tags: true
env:
  global:
    secure: I7nwK646qNB+ezeoN3bZRk6NWxQUdNNFVw5LyrPaeVwooXlK90TVNHg5W+aW17lee6S3BcTK/ux207ylPVJXbW/BUHvNZVrrKAapW45DEweUhnPsnz++kRN4mKtUUq59rF9VAC3cc/cArsJuni/sLNykFxE9lXnA3rSY9igeyuBw5S7QY5mW4eyO62tRFmYFuJPfVIXKOa6yDSXQ7MotdL4KjfGin6+odJPSVT6BwbGJ1xRMULunuOJr+69IaroCBtvexMoQsDhCvRx+sPELj7KFBpx7M6JyfWB2B0X2GTznqijihEUGxR2VTxXsj5mJvCDpMv5NiEdIuwRY6/2gDsP60uzvkSQPAcMQ5boWL0N3OhVR/rx+AzfaHGXeMq+iA6emB7I4gs09iSjHI+Q9Z9HU8rSaJc7AFiHBheaw4a5/UI0DKHJHcjKd+nePckWFQ2sJmAJ+Lm/LbreFhaPoEBmVTWo8SJCa4NJvtZMI7GsMWqTREA59P0Un0eiuUlBoqX0oPhmcY0W6fihGV9tjufVDIoCFYQmuhxlfIkr9xCF5ude8Ucoscq9eeNXJAEPrcU+k7R3/0GFoFaJ32n+FKo6o3KJkGdo4DoJuBHBwRazNBvzliOlbxnr4ojb2JQpvZ57SAUK4Ds0VrY96lt6mlCZafb8VEkFkw/FCPyuPnWE=
